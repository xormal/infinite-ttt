# Бесконечные крестики‑нолики (Infinite Tic‑Tac‑Toe)

## О проекте
Это текстовая игра **Бесконечные крестики‑нолики** – вариант классической
«Крестики‑нолики», где поле не ограничено фиксированным размером. Цель игрока –
создать линию из трёх одинаковых символов (X или O) в любом направлении:
горизонтальном, вертикальном или диагональном. После формирования такой линии
соответствующие клетки удаляются, а игрок получает очко. Игра продолжается до
тех пор, пока игрок не решит выйти.

## История игры
* **1970‑е** – первые упоминания о «бесконечном» поле в вариантах крестиков‑нолики
  появились в советских шахматных журналах как логическая головоломка.
* **1990‑е** – в интернете стали появляться реализации на BASIC и C, где поле
  представлялось массивом, расширяемым по мере необходимости.
* **2020‑е** – появилось несколько Python‑реализаций, в том числе эта, которая
  использует только стандартную библиотеку и поддерживает одиночный режим
  (человек vs простой ИИ) и сетевую игру через TCP‑сервер.

## Как запустить
### Предварительные требования
* Python 3.8 или новее (используется только стандартная библиотека).
* На Windows / Linux / macOS терминал с поддержкой `curses` (на Windows нужен
  пакет `windows-curses`, который автоматически устанавливается в виртуальном
  окружении, если вы используете `make install`).

### Установка зависимостей
```bash
make install   # создаёт .venv и устанавливает зависимости из requirements.txt
```

### Запуск игры в терминале
```bash
make run       # эквивалентно: python -m src.main
```
Или напрямую без Makefile:
```bash
python -m src.main
```

### Сетевая игра
1. **Запуск сервера** (по умолчанию слушает `0.0.0.0:5555`):
   ```bash
   make server   # или: python -m server.server
   ```
2. **Запуск клиента** (по умолчанию подключается к `127.0.0.1:5555`):
   ```bash
   make client   # или: python -m src.network_client
   ```
   При необходимости измените переменные `host` и `port` в начале файла
   `src/network_client.py`.

## Управление в игре
* **Стрелки** – перемещение курсора по полю.
* **Пробел** – поставить свой символ (`X`).
* **Q** – выйти из игры.
* **p** – активировать случайный power‑up (очистка случайной линии). Доступно
  только если в `src/config.py` установлен `ENABLE_POWERUPS = True`.
* При бездействии в одиночном режиме через `MOVE_TIMEOUT` секунд делает ход
  компьютер (по умолчанию 5 сек).

## Правила игры
1. Игроки ходят по очереди, ставя свой символ в свободную клетку.
2. Как только на поле появляется **тройка** одинаковых символов, эти клетки
   удаляются, а игрок, чей символ образовал тройку, получает одно очко.
3. После удаления клетки поле «схлопывается», но координаты остальных клеток
   остаются прежними – поле действительно бесконечно.
4. Игра заканчивается, когда игрок нажимает `Q`. Подсчитываются набранные
   очки, и выводится победитель.

## Настройки
Все параметры находятся в `src/config.py`:
* `DIFFICULTY` – уровень ИИ (`EASY`, `MEDIUM`, `HARD`). Определяет радиус поиска
  ходов.
* `MOVE_TIMEOUT` – время бездействия до автоматического хода компьютера.
* `ENABLE_POWERUPS` – включить/выключить power‑up `p`.
* `TWO_PLAYER_MODE` – режим двух игроков без ИИ.
* Цветовые индексы `COLOR_PLAYER`, `COLOR_COMPUTER`, `COLOR_CURSOR` –
  используются в `curses` для раскраски.

## Тесты и линтинг
```bash
make test      # запускает pytest
make lint      # flake8 + black --check
```

## Сборка Docker‑контейнера
```bash
docker compose up --build   # собирает образ и поднимает сервер
```
Контейнер слушает порт **5555** (проброшен как `5555:5555`). Параметры хоста и
порта можно переопределить переменными окружения `SERVER_HOST` и
`SERVER_PORT`.

## Вклад в проект
* Все комментарии, сообщения об ошибках и пул‑реквесты пишутся **на русском**.
* Следуйте рекомендациям из `AGENTS.md` (оформление кода, стиль `black`,
  имена в `snake_case` и т.д.).
* При изменении поведения обновляйте тесты в каталоге `tests/`.

---
**Удачной игры!**

